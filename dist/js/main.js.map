{"version":3,"file":"main.js","names":["state","path","openedPopups","search","menu","profile","profileData","myCard","address","delivertAddress","selfdeliveryAddress","catalog","login","headerElements","header","document","querySelector","logo","openMenuOrCloseAllBtn","toFixHeader","classList","contains","add","body","style","overflow","removeFixHeader","remove","popups","allPopups","querySelectorAll","closeAllPopups","forEach","el","returnBtns","openPreviousPopup","pop","length","openAnyPopup","removeEventListener","closePopup","overlay","input","open","close","parentElement","menuContent","trigger","content","addEventListener","openSearchPopup","find","console","log","push","popupName","height","offsetTop","offsetHeight","btn","concat","deliveryAddress","order","manageCard","cardLogin","closeCard","card","value","nextElementSibling","toggle","dnd","triggerElement","animatedIcon","hiddenContent","arrow","maxHeight","item","opacity","scrollHeight","Tab","selector","options","_classCallCheck","defaultOptions","isChanged","Object","assign","tabs","tabsList","tabsButtons","tabsPanels","error","check","init","events","_createClass","key","_this","setAttribute","i","id","removeAttribute","_this2","e","currentTab","currentTarget","switchTabs","index","Array","prototype","indexOf","call","direction","which","focus","newTab","oldTab","arguments","undefined","oldIndex","tab1","listHendler","listHeaders","addHiddenStyle","timerId","showContent","hideContent","element","changeMaxHeight","parentNode","closest","setTimeout","openedContent","allOpenedItems","previousElementSibling","filterRadioBtns","radioBtn","innerText","filterViewSelector"],"sources":["main.js"],"sourcesContent":["const state = {\r\n  path: [],\r\n  openedPopups: {\r\n    search: false,\r\n    menu: false,\r\n    profile: false,\r\n    profileData: false,\r\n    myCard: false,\r\n    address: false,\r\n    delivertAddress: false,\r\n    selfdeliveryAddress: false,\r\n    catalog: false,\r\n    login: false,\r\n  }\r\n}\r\nconst headerElements = {\r\n  header: document.querySelector('.header'),\r\n  logo: document.querySelector('.__js-logo'),\r\n  openMenuOrCloseAllBtn: document.querySelector('.menu-btn'),\r\n  toFixHeader: function() {\r\n    if (!headerElements.header.classList.contains('__js-fixed')) {\r\n      headerElements.header.classList.add('__js-fixed');\r\n    }\r\n    if (document.body.style.overflow !== 'hidden') {\r\n      document.body.style.overflow = 'hidden';\r\n    } \r\n  },\r\n  removeFixHeader: function() {\r\n    document.body.style.overflow = 'auto';\r\n    headerElements.header.classList.remove('__js-fixed');\r\n  }\r\n}\r\n\r\n\r\nconst popups = {\r\n  allPopups: document.querySelectorAll('.overlay'),\r\n  closeAllPopups() {\r\n    popups.allPopups.forEach(el => {\r\n      el.classList.remove('__js-active');\r\n    });\r\n    for (let el in state.openedPopups) {\r\n      state.openedPopups[el] = false;\r\n    }  \r\n  },\r\n  returnBtns: document.querySelectorAll('.return-btn'),\r\n  openPreviousPopup: function () {\r\n    state.path.pop();\r\n    if(state.path.length) {\r\n      openAnyPopup(state.path[state.path.length - 1]);\r\n    } else {\r\n      popups.closeAllPopups();\r\n      headerElements.openMenuOrCloseAllBtn.classList.remove('__js_active');\r\n      headerElements.openMenuOrCloseAllBtn.removeEventListener('click', closePopup);\r\n    }\r\n  },\r\n  'search': {\r\n    overlay: document.querySelector('#search-overlay'),\r\n    input: document.querySelector('.__js-searchInput'),\r\n    open: function() {\r\n      popups.closeAllPopups();\r\n      state.openedPopups.search = true;\r\n      popups.search.overlay.classList.add('__js-active');\r\n      headerElements.logo.classList.add('__js-logo_none');\r\n  \r\n    },\r\n    close: function() {\r\n      popups.search.overlay.classList.remove('__js-active');\r\n      headerElements.logo.classList.remove('__js-logo_none');\r\n      popups.search.input.classList.remove('__js-searchInput_active');\r\n      popups.search.input.parentElement.classList.remove('__js-headerSearch_active');\r\n    }\r\n  },\r\n  'menu': {\r\n    overlay: document.querySelector('#menu-overlay'),\r\n    menuContent: document.querySelector('#menu-popup'),\r\n  },\r\n  'profile': {\r\n    trigger: document.querySelector('.menu__profile'),\r\n    overlay: document.querySelector('#profile-overlay'),\r\n    content: document.querySelector('#profile-popup'),\r\n  },\r\n  'profileData': {\r\n    trigger: document.querySelector('#profile-data'),\r\n    overlay: document.querySelector('#profile-data-overlay'),\r\n    content: document.querySelector('#profile-data-popup'),\r\n  },\r\n  'myCard': {\r\n    trigger: document.querySelector('#my-card'),\r\n    overlay: document.querySelector('#my-card-overlay'),\r\n    content: document.querySelector('#my-card-popup'),\r\n  },\r\n  'address': {\r\n    trigger: document.querySelector('#address'),\r\n    overlay: document.querySelector('#address-overlay'),\r\n    content: document.querySelector('#address-popup'),\r\n  },\r\n  'card': {\r\n    trigger: document.querySelector('#card-magnifier'),\r\n    overlay: document.querySelector('#show-card-overlay'),\r\n    content: document.querySelector('#show-card-popup'),\r\n  },\r\n  'deliveryAddress': {\r\n    trigger: document.querySelector('#delivery-address'),\r\n    overlay: document.querySelector('#delivery-address-overlay'),\r\n    content: document.querySelector('#delivery-address-popup'),\r\n  },\r\n  'selfdeliveryAddress': {\r\n    trigger: document.querySelector('#selfdelivery-address'),\r\n    overlay: document.querySelector('#selfdelivery-address-overlay'),\r\n    content: document.querySelector('#selfdelivery-address-popup'),\r\n  },\r\n  'order': {\r\n    trigger: document.querySelector('#order'),\r\n    overlay: document.querySelector('#order-overlay'),\r\n    content: document.querySelector('#order-popup'),\r\n  },\r\n  'catalog': {\r\n    trigger: document.querySelector('#catalog'),\r\n    overlay: document.querySelector('#catalog-overlay'),\r\n    content: document.querySelector('#catalog-popup'),\r\n  },\r\n  'login': {\r\n    trigger: document.querySelector('#login'),\r\n    overlay: document.querySelector('#login-overlay_1'),\r\n    content: document.querySelector('#login-popup_1'),\r\n  },\r\n  'manageCard': {\r\n    trigger: document.querySelector('#manage-my-card-btn'),\r\n    overlay: document.querySelector('#my-card-overlay'),\r\n    content: document.querySelector('#my-card-popup'),\r\n  },\r\n  'cardLogin': {\r\n    trigger: document.querySelector('#card-login-btn'),\r\n    overlay: document.querySelector('#login-overlay_12'),\r\n    content: document.querySelector('#login-popup'),\r\n  }\r\n}\r\n\r\n//собитие на фокус инпута поиска\r\npopups.search.input.addEventListener('focus', () => {\r\n  openSearchPopup();\r\n})\r\n\r\n//логика открытия поиска отличчается, поэтому создана отдельная функция\r\nfunction openSearchPopup () {\r\n  popups.search.open();\r\n  headerElements.toFixHeader();\r\n  popups.search.input.classList.add('__js-searchInput_active');\r\n  popups.search.input.parentElement.classList.add('__js-headerSearch_active');\r\n  headerElements.openMenuOrCloseAllBtn.classList.add('__js_active');\r\n  headerElements.openMenuOrCloseAllBtn.addEventListener('click', closePopup);\r\n}\r\n\r\n// закрытие попапов\r\nfunction closePopup() {\r\n  headerElements.removeFixHeader();\r\n  if (state.openedPopups.search) {\r\n    popups.search.close();\r\n    state.openedPopups.search = false;\r\n  }\r\n  popups.closeAllPopups();\r\n  state.path = []; \r\n  headerElements.openMenuOrCloseAllBtn.classList.remove('__js_active');\r\n  headerElements.openMenuOrCloseAllBtn.removeEventListener('click', closePopup);\r\n}\r\n\r\n// собитие на клик по кнопке меню\r\nheaderElements.openMenuOrCloseAllBtn.addEventListener('click', () => {\r\n  if (state.openedPopups.search) {\r\n    return;\r\n  }\r\n  if (!state.path.find(el => el == 'menu')) {\r\n    console.log(true);\r\n    state.path.push('menu');\r\n  }\r\n  state.openedPopups.menu = true;\r\n  headerElements.toFixHeader(); \r\n  popups.menu.overlay.classList.add('__js-active');\r\n  headerElements.openMenuOrCloseAllBtn.classList.add('__js_active');\r\n  headerElements.openMenuOrCloseAllBtn.addEventListener('click', closePopup);\r\n});\r\n\r\nfunction openAnyPopup(popupName) {\r\n  popups.closeAllPopups();\r\n  state.openedPopups[popupName] = true;\r\n  headerElements.toFixHeader();\r\n  popups[popupName].overlay.classList.add('__js-active');\r\n  if(popups[popupName].content) {\r\n    popups[popupName].content.addEventListener('scroll', () => {\r\n      popups[popupName].content.style.height = document.querySelector('.menu-panel').offsetTop - headerElements.header.offsetHeight + 5 + \"px\";\r\n      });\r\n  }\r\n  popups.returnBtns.forEach(btn => {\r\n    btn.addEventListener('click', popups.openPreviousPopup);\r\n  })\r\n  if(popupName != 'search' && popupName != 'menu' && state.path[state.path.length - 1] != popupName) {\r\n    state.path.push(`${popupName}`);\r\n  }\r\n}\r\n\r\nif(popups.profile.trigger) {\r\n  popups.profile.trigger.addEventListener('click', () => {\r\n    openAnyPopup('profile');\r\n  });\r\n  \r\n}\r\n\r\nif(popups.profileData.trigger) {\r\n  popups.profileData.trigger.addEventListener('click', () => {\r\n    openAnyPopup('profileData');\r\n  });\r\n}\r\n\r\nif (popups.myCard.trigger) {\r\n  popups.myCard.trigger.addEventListener('click', () => {\r\n    openAnyPopup('myCard');\r\n  });\r\n}\r\n\r\nif (popups.address.trigger) {\r\n  popups.address.trigger.addEventListener('click', () => {\r\n    openAnyPopup('address');\r\n  });\r\n}\r\n\r\n\r\nif (popups.deliveryAddress.trigger) {\r\n  popups.deliveryAddress.trigger.addEventListener('click', () => {\r\n    openAnyPopup('deliveryAddress');\r\n  });  \r\n}\r\n\r\n\r\nif(popups.selfdeliveryAddress.trigger) {\r\n  popups.selfdeliveryAddress.trigger.addEventListener('click', () => {\r\n    openAnyPopup('selfdeliveryAddress');\r\n  });\r\n}\r\n\r\n\r\nif ( popups.order.trigger) {\r\n  popups.order.trigger.addEventListener('click', () => {\r\n  openAnyPopup('order');\r\n});\r\n}\r\n\r\nif (popups.catalog.trigger) {\r\n  popups.catalog.trigger.addEventListener('click', () => {\r\n    headerElements.toFixHeader();\r\n    openAnyPopup('catalog');\r\n    headerElements.openMenuOrCloseAllBtn.classList.add('__js_active');\r\n    headerElements.openMenuOrCloseAllBtn.addEventListener('click', closePopup);\r\n  });\r\n}\r\n\r\nif (popups.login.trigger) {\r\n  popups.login.trigger.addEventListener('click', () => {\r\n    headerElements.toFixHeader();\r\n    openAnyPopup('login');\r\n    headerElements.openMenuOrCloseAllBtn.classList.add('__js_active');\r\n    headerElements.openMenuOrCloseAllBtn.addEventListener('click', closePopup);\r\n  });\r\n}\r\n\r\n// manage-card\r\nif (popups.manageCard.trigger) {\r\n  popups.manageCard.trigger.addEventListener('click', () => {\r\n    headerElements.toFixHeader();\r\n    openAnyPopup('manageCard');\r\n    headerElements.openMenuOrCloseAllBtn.classList.add('__js_active');\r\n    headerElements.openMenuOrCloseAllBtn.addEventListener('click', closePopup);\r\n  });\r\n}\r\n\r\n// открытие формы регистрации\r\nif (popups.cardLogin.trigger) {\r\n  popups.cardLogin.trigger.addEventListener('click', () => {\r\n    headerElements.toFixHeader();\r\n    openAnyPopup('cardLogin');\r\n    headerElements.openMenuOrCloseAllBtn.classList.add('__js_active');\r\n    headerElements.openMenuOrCloseAllBtn.addEventListener('click', closePopup);\r\n  });\r\n}\r\n\r\n\r\n// открытие и закрытие карты участника бонусной программы\r\nfunction closeCard() {\r\n  document.body.style.overflow = 'auto';\r\n  popups.card.overlay.classList.remove('__js-active');\r\n  popups.card.overlay.removeEventListener('click', closeCard);\r\n}\r\n\r\nif (popups.card.trigger) {\r\n  popups.card.trigger.addEventListener('click', () => {\r\n    if (document.body.style.overflow !== 'hidden') {\r\n      document.body.style.overflow = 'hidden';\r\n    }\r\n    popups.card.overlay.classList.add('__js-active');\r\n    popups.card.overlay.addEventListener('click', closeCard);\r\n  });\r\n}\r\n\r\n\r\n\r\n// для инпутов Данных профиля\r\ndocument.querySelectorAll('.input-box__input').forEach(input => {\r\n  input.addEventListener('input', () => {\r\n    if (input.value) {\r\n      input.nextElementSibling.classList.add('__js-active');\r\n      input.nextElementSibling.addEventListener('click', () => {\r\n        input.value = \"\";\r\n        input.nextElementSibling.classList.remove('__js-active');\r\n      })\r\n    } else {\r\n      input.nextElementSibling.classList.remove('__js-active');\r\n    }\r\n  })\r\n});\r\n\r\ndocument.querySelector('.card__bonus').addEventListener('click', () => {\r\n  document.querySelector('.card__bonus-count').classList.toggle('__js-blur');\r\n})\r\n\r\n\r\n\r\n\r\n// Обработка открытия контента dropdown способом\r\nfunction dnd(triggerElement, animatedIcon, hiddenContent) {\r\n  document.querySelectorAll(`.${triggerElement}`).forEach(el => {\r\n    el.addEventListener('click', () => {\r\n      const arrow = el.querySelector(`.${animatedIcon}`);\r\n      const content = el.nextElementSibling;\r\n  \r\n      if (content.style.maxHeight) {\r\n        document.querySelectorAll(`.${hiddenContent}`).forEach( item => {\r\n          item.style.maxHeight = null;\r\n          item.style.opacity = null;\r\n          }) \r\n        document.querySelectorAll(`.${animatedIcon}`).forEach(item => {\r\n          item.classList.remove('__js-opened');\r\n        })\r\n      } else {\r\n        document.querySelectorAll(`.${hiddenContent}`).forEach( item => {\r\n          item.style.maxHeight = null;\r\n          item.style.opacity = null;  \r\n        })\r\n        content.style.maxHeight = content.scrollHeight + 'px';\r\n        content.style.opacity = 1;\r\n        \r\n        document.querySelectorAll(`.${animatedIcon}`).forEach(item => {\r\n          item.classList.remove('__js-opened');\r\n        })\r\n        arrow.classList.add('__js-opened');\r\n      }\r\n    })\r\n  });\r\n  \r\n}\r\n\r\n\r\n// Открытие скрытого контента меню\r\ndnd('menu__li-with-content', 'menu-link__icon', 'menu__content');\r\n// Открытие списка магазинов\r\ndnd('dnd', 'dnd__icon', 'dnd__content');\r\n\r\n\r\n\r\n\r\n\r\nclass Tab {\r\n  constructor(selector, options) {\r\n      let defaultOptions = {\r\n          isChanged: () => {\r\n\r\n          }\r\n      }\r\n      this.options = Object.assign(defaultOptions, options); //совмезщение, перезапись\r\n      this.selector = selector;\r\n      this.tabs = document.querySelector(`[data-tabs=\"${selector}\"]`); //нахождение табов\r\n      if(this.tabs) {\r\n          this.tabsList = this.tabs.querySelector('.tabs__nav');\r\n          this.tabsButtons = this.tabs.querySelectorAll('.tabs__nav-btn');\r\n          this.tabsPanels = this.tabs.querySelectorAll('.tabs__panel');\r\n\r\n      } else {\r\n          console.error(`Нет элемента со свойством data-tabs=${selector}`);\r\n          return;\r\n      }\r\n\r\n      this.check();\r\n      this.init();\r\n      this.events();\r\n  }\r\n\r\n  check() {\r\n      if (document.querySelectorAll(`[data-tabs=\"${this.selector}]`).length > 1) {\r\n          console.error('Количество элементов с одинакомым data-tabs больше одного');\r\n          return;\r\n      }\r\n\r\n      if (this.tabsButtons.length !== this.tabsPanels.length) {\r\n          console.error('Количество табов и панелей не совпадает');\r\n          return;\r\n      }\r\n   }\r\n\r\n  init() {\r\n      this.tabsList.setAttribute('role', 'tablist');\r\n\r\n      this.tabsButtons.forEach((el, i) => {\r\n          el.setAttribute('role', 'tab');\r\n          el.setAttribute('tabindex', '-1');\r\n          el.setAttribute('id', `${this.selector}${i + 1}`); //чтобы не пересекались id\r\n          el.classList.remove('tabs__nav-btn_active');\r\n      });\r\n      this.tabsPanels.forEach((el, i) => {\r\n          el.setAttribute('role', 'tabpanel');\r\n          el.setAttribute('tabindex', '-1');\r\n          //aria-labeledBy\r\n          el.setAttribute('aria-labelledby', this.tabsButtons[i].id);\r\n          el.classList.remove('tabs__panel_active');\r\n      });\r\n\r\n      this.tabsButtons[0].classList.add('tabs__nav-btn_active');\r\n      this.tabsButtons[0].removeAttribute('tabindex');\r\n      this.tabsButtons[0].setAttribute('aria-selected', 'true');\r\n      this.tabsPanels[0].classList.add('tabs__panel_active');\r\n      \r\n  }\r\n\r\n  events() {\r\n      this.tabsButtons.forEach((el, i) => {\r\n          el.addEventListener('click', e => {\r\n              let currentTab = this.tabsList.querySelector('[aria-selected]');\r\n              if (e.currentTarget !== currentTab) {\r\n                  this.switchTabs(e.currentTarget, currentTab);\r\n              }\r\n          });\r\n\r\n          el.addEventListener('keydown', e => {\r\n              let index = Array.prototype.indexOf.call(this.tabsButtons, e.currentTarget);\r\n\r\n              let direction = null;\r\n\r\n              if (e.which === 37) {\r\n                  direction = index - 1;\r\n              } else if (e.which === 39) {\r\n                  direction = index + 1;\r\n              } else if (e.which === 40) {\r\n                  direction = 'down';\r\n              } else {\r\n                  direction = null;\r\n              }\r\n\r\n              if (direction !== null) {\r\n                  if (direction === 'down') {\r\n                      this.tabsPanels[i].focus();\r\n                  } else if (this.tabsButtons[direction]) {\r\n                      this.switchTabs(this.tabsButtons[direction], e.currentTarget);\r\n                  } else {\r\n                  }\r\n              }\r\n          })\r\n      });\r\n\r\n\r\n  }\r\n\r\n  switchTabs(newTab, oldTab = this.tabs.querySelector('[aria-selected]')) {\r\n      newTab.focus();\r\n      newTab.removeAttribute('tabindex');\r\n      newTab.setAttribute('aria-selected', 'true');\r\n\r\n      oldTab.removeAttribute('aria-selected');\r\n      oldTab.setAttribute('tabindex', '-1');\r\n\r\n      let index = Array.prototype.indexOf.call(this.tabsButtons, newTab);\r\n      let oldIndex = Array.prototype.indexOf.call(this.tabsButtons, oldTab);\r\n      this.tabsPanels[oldIndex].classList.remove('tabs__panel_active');\r\n      this.tabsPanels[index].classList.add('tabs__panel_active');\r\n      this.tabsButtons[oldIndex].classList.remove('tabs__nav-btn_active');\r\n      this.tabsButtons[index].classList.add('tabs__nav-btn_active');\r\n\r\n      this.options.isChanged(this);\r\n  }\r\n}\r\n\r\nif (document.querySelector('.tabs')) {\r\n  const tab1 = new Tab('tab', {});\r\n\r\n}\r\n\r\n\r\n\r\n\r\n// определяем все заголовки списков\r\nif (document.querySelector('.list-header')) {\r\n  listHendler();\r\n}\r\n\r\nfunction listHendler() {\r\n  const listHeaders = document.querySelectorAll('.list-header');\r\n  \r\n// добавляем всем контентам класс _js-hidden\r\nfor (let i = 0; i < listHeaders.length; i++) {\r\n  addHiddenStyle(listHeaders[i].nextElementSibling);\r\n}\r\n\r\nfunction addHiddenStyle(content) {\r\n \r\n  // content.previousSiblingELement.classList.remove('._active');\r\n  content.classList.add('_js-hidden'); \r\n  content.style.maxHeight = '0px';     // только так работает анимация изменения высоты\r\n} \r\n\r\n\r\nlet timerId;\r\n// вешаем событие клика на заголовки каждого списка\r\nlistHeaders.forEach(header => {\r\n  header.addEventListener('click', function () { \r\n      if(!timerId) {\r\n          if (header.nextElementSibling.classList.contains('_js-hidden')) {\r\n              showContent(this); // т.к. функция не стрелочная, то this будет именно тот header на который произошел клик \r\n              return;\r\n          } \r\n          hideContent(this);\r\n      }\r\n  });\r\n})\r\n\r\nfunction showContent(element) {\r\n  element.classList.add('_active');\r\n  const hiddenContent = element.nextElementSibling;\r\n  hiddenContent.classList.remove('_js-hidden');\r\n  hiddenContent.style.maxHeight = hiddenContent.scrollHeight + 'px';\r\n\r\n  function changeMaxHeight (element) {\r\n      element.parentNode.parentNode.style.maxHeight = element.parentNode.parentNode.scrollHeight + hiddenContent.scrollHeight + 'px';\r\n      if (element.parentNode.parentNode.closest('.list-content')) {\r\n          changeMaxHeight(element.parentNode.parentNode.closest('.list-content'));\r\n      }   else {\r\n          return;\r\n      }    \r\n  }\r\n  changeMaxHeight(hiddenContent);\r\n\r\n  // таймер для того, чтобы каждое событие ожидало выполнения предыдущего\r\n  timerId = setTimeout(() => {\r\n      timerId = 0;\r\n  },  300);\r\n}\r\n\r\nfunction hideContent(element) {\r\n  element.classList.remove('_active');\r\n  const openedContent = element.nextElementSibling;\r\n  addHiddenStyle(openedContent);\r\n  const allOpenedItems = openedContent.querySelectorAll('.list-content');\r\n    allOpenedItems.forEach(el => {\r\n        addHiddenStyle(el);\r\n        el.previousElementSibling.classList.remove('_active');\r\n    })\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n// Выбор фильтра поиска\r\nconst filterRadioBtns = document.querySelectorAll('[name=\"filter\"]');\r\nif (filterRadioBtns) {\r\n  filterRadioBtns.forEach(radioBtn => {\r\n    radioBtn.addEventListener('change', () => {\r\n      document.querySelector('#filter-type').innerText = `Фильтр / ${radioBtn.value}`;\r\n    })\r\n  })\r\n}\r\n\r\nconst filterViewSelector = document.querySelector('.view-selector');\r\nif (filterViewSelector) {\r\n  filterViewSelector.addEventListener('click', () => {\r\n    filterViewSelector.classList.toggle('view-selector_to-grid');\r\n  })\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}